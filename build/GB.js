var GB =
/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};

/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {

/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId])
/******/ 			return installedModules[moduleId].exports;

/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			exports: {},
/******/ 			id: moduleId,
/******/ 			loaded: false
/******/ 		};

/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);

/******/ 		// Flag the module as loaded
/******/ 		module.loaded = true;

/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}


/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;

/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;

/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";

/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(0);
/******/ })
/************************************************************************/
/******/ ([
/* 0 */
/***/ function(module, exports, __webpack_require__) {

	eval("exports.version = '0.0.1';\n\nexports.graph = __webpack_require__(1);\nexports.view = __webpack_require__(2);\nexports.model = __webpack_require__(3);\nexports.nodeType = __webpack_require__(4);\nexports.events = __webpack_require__(5);//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMC5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL3NyYy9HQi5qcz9kYWEwIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydHMudmVyc2lvbiA9ICcwLjAuMSc7XG5cbmV4cG9ydHMuZ3JhcGggPSByZXF1aXJlKCcuL2dyYXBoJyk7XG5leHBvcnRzLnZpZXcgPSByZXF1aXJlKCcuL3ZpZXcnKTtcbmV4cG9ydHMubW9kZWwgPSByZXF1aXJlKCcuL21vZGVsJyk7XG5leHBvcnRzLm5vZGVUeXBlID0gcmVxdWlyZSgnLi9ub2RlVHlwZScpO1xuZXhwb3J0cy5ldmVudHMgPSByZXF1aXJlKCcuL2V2ZW50cycpO1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9zcmMvR0IuanNcbiAqKiBtb2R1bGUgaWQgPSAwXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlUm9vdCI6IiJ9");

/***/ },
/* 1 */
/***/ function(module, exports) {

	eval("'use strict';\n\nmodule.exports = function (cfg) {\n    var s = {\n        start: start,\n        view: new GB.view(cfg.element),\n        nodes: cfg.nodes,\n        config: cfg.config || {},\n        intersect: {\n            node: []\n        },\n        clicked: {\n            last: null,\n            prev: null\n        }\n    };\n    s.model = new GB.model(null, s);\n    s.events = new GB.events(cfg.element, s, cfg.events);\n\n    function start() {\n        requestAnimationFrame(start);\n        s.view.controls.update();\n        render();\n    }\n\n    function render() {\n        s.model.data.nodes.forEach(function (item) {\n            var obj = s.view.scene.getObjectById(item.data.nodeId, true);\n            if (obj) {\n                obj.position.x = countX(item.x);\n                obj.position.y = countY(item.y);\n            }\n        });\n        s.model.data.links.forEach(function (item) {\n            var obj = s.view.scene.getObjectById(item.linkId, true);\n            obj.geometry.vertices[0].x = countX(item.source.x);\n            obj.geometry.vertices[0].y = countY(item.source.y);\n\n            obj.geometry.vertices[1].x = countX(item.target.x);\n            obj.geometry.vertices[1].y = countY(item.target.y);\n            obj.geometry.verticesNeedUpdate = true;\n        });\n\n        s.view.raycaster.setFromCamera(s.view.mouse, s.view.camera);\n        s.intersect.node = s.view.raycaster.intersectObjects(s.view.nodes.children)[0];\n        s.view.composer.render();\n        if (s.hud)\n            s.view.renderer.render(s.hud.scene, s.hud.camera);\n    }\n\n    function countX(x) {\n        return x - s.view.width / 2;\n    }\n\n    function countY(y) {\n        return -(y - s.view.height / 2);\n    }\n\n    return s;\n};//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMS5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL3NyYy9ncmFwaC5qcz9lZjk2Il0sInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0JztcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoY2ZnKSB7XG4gICAgdmFyIHMgPSB7XG4gICAgICAgIHN0YXJ0OiBzdGFydCxcbiAgICAgICAgdmlldzogbmV3IEdCLnZpZXcoY2ZnLmVsZW1lbnQpLFxuICAgICAgICBub2RlczogY2ZnLm5vZGVzLFxuICAgICAgICBjb25maWc6IGNmZy5jb25maWcgfHwge30sXG4gICAgICAgIGludGVyc2VjdDoge1xuICAgICAgICAgICAgbm9kZTogW11cbiAgICAgICAgfSxcbiAgICAgICAgY2xpY2tlZDoge1xuICAgICAgICAgICAgbGFzdDogbnVsbCxcbiAgICAgICAgICAgIHByZXY6IG51bGxcbiAgICAgICAgfVxuICAgIH07XG4gICAgcy5tb2RlbCA9IG5ldyBHQi5tb2RlbChudWxsLCBzKTtcbiAgICBzLmV2ZW50cyA9IG5ldyBHQi5ldmVudHMoY2ZnLmVsZW1lbnQsIHMsIGNmZy5ldmVudHMpO1xuXG4gICAgZnVuY3Rpb24gc3RhcnQoKSB7XG4gICAgICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZShzdGFydCk7XG4gICAgICAgIHMudmlldy5jb250cm9scy51cGRhdGUoKTtcbiAgICAgICAgcmVuZGVyKCk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gcmVuZGVyKCkge1xuICAgICAgICBzLm1vZGVsLmRhdGEubm9kZXMuZm9yRWFjaChmdW5jdGlvbiAoaXRlbSkge1xuICAgICAgICAgICAgdmFyIG9iaiA9IHMudmlldy5zY2VuZS5nZXRPYmplY3RCeUlkKGl0ZW0uZGF0YS5ub2RlSWQsIHRydWUpO1xuICAgICAgICAgICAgaWYgKG9iaikge1xuICAgICAgICAgICAgICAgIG9iai5wb3NpdGlvbi54ID0gY291bnRYKGl0ZW0ueCk7XG4gICAgICAgICAgICAgICAgb2JqLnBvc2l0aW9uLnkgPSBjb3VudFkoaXRlbS55KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHMubW9kZWwuZGF0YS5saW5rcy5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtKSB7XG4gICAgICAgICAgICB2YXIgb2JqID0gcy52aWV3LnNjZW5lLmdldE9iamVjdEJ5SWQoaXRlbS5saW5rSWQsIHRydWUpO1xuICAgICAgICAgICAgb2JqLmdlb21ldHJ5LnZlcnRpY2VzWzBdLnggPSBjb3VudFgoaXRlbS5zb3VyY2UueCk7XG4gICAgICAgICAgICBvYmouZ2VvbWV0cnkudmVydGljZXNbMF0ueSA9IGNvdW50WShpdGVtLnNvdXJjZS55KTtcblxuICAgICAgICAgICAgb2JqLmdlb21ldHJ5LnZlcnRpY2VzWzFdLnggPSBjb3VudFgoaXRlbS50YXJnZXQueCk7XG4gICAgICAgICAgICBvYmouZ2VvbWV0cnkudmVydGljZXNbMV0ueSA9IGNvdW50WShpdGVtLnRhcmdldC55KTtcbiAgICAgICAgICAgIG9iai5nZW9tZXRyeS52ZXJ0aWNlc05lZWRVcGRhdGUgPSB0cnVlO1xuICAgICAgICB9KTtcblxuICAgICAgICBzLnZpZXcucmF5Y2FzdGVyLnNldEZyb21DYW1lcmEocy52aWV3Lm1vdXNlLCBzLnZpZXcuY2FtZXJhKTtcbiAgICAgICAgcy5pbnRlcnNlY3Qubm9kZSA9IHMudmlldy5yYXljYXN0ZXIuaW50ZXJzZWN0T2JqZWN0cyhzLnZpZXcubm9kZXMuY2hpbGRyZW4pWzBdO1xuICAgICAgICBzLnZpZXcuY29tcG9zZXIucmVuZGVyKCk7XG4gICAgICAgIGlmIChzLmh1ZClcbiAgICAgICAgICAgIHMudmlldy5yZW5kZXJlci5yZW5kZXIocy5odWQuc2NlbmUsIHMuaHVkLmNhbWVyYSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gY291bnRYKHgpIHtcbiAgICAgICAgcmV0dXJuIHggLSBzLnZpZXcud2lkdGggLyAyO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGNvdW50WSh5KSB7XG4gICAgICAgIHJldHVybiAtKHkgLSBzLnZpZXcuaGVpZ2h0IC8gMik7XG4gICAgfVxuXG4gICAgcmV0dXJuIHM7XG59O1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9zcmMvZ3JhcGguanNcbiAqKiBtb2R1bGUgaWQgPSAxXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZVJvb3QiOiIifQ==");

/***/ },
/* 2 */
/***/ function(module, exports) {

	eval("module.exports = function (element) {\n    this.width = element.clientWidth;\n    this.height = element.clientHeight;\n    this.scene = new THREE.Scene();\n    this.camera = new THREE.OrthographicCamera(-this.width / 2, this.width / 2, this.height / 2, -this.height / 2, 0, 15);\n    this.camera.position.z = 10;\n    this.camera.zoom = 4;\n    this.camera.updateProjectionMatrix();\n\n    this.renderer = new THREE.WebGLRenderer({antialias: false, alpha: true});\n    this.renderer.setPixelRatio(window.devicePixelRatio);\n    this.renderer.setSize(this.width, this.height);\n    this.renderer.autoClear = false;\n\n    var renderModel = new THREE.RenderPass(this.scene, this.camera);\n    var effectBloom = new THREE.BloomPass(.7);\n    var effectCopy = new THREE.ShaderPass(THREE.CopyShader);\n    var effectFXAA = new THREE.ShaderPass(THREE.FXAAShader);\n    effectFXAA.uniforms['resolution'].value.set(1 / this.width, 1 / this.height);\n    effectCopy.renderToScreen = true;\n\n    this.composer = new THREE.EffectComposer(this.renderer);\n    this.composer.setSize(this.width, this.height);\n\n    this.composer.addPass(renderModel);\n    this.composer.addPass(effectFXAA);\n    this.composer.addPass(effectBloom);\n    this.composer.addPass(effectCopy);\n\n    this.raycaster = new THREE.Raycaster();\n    this.mouse = new THREE.Vector2();\n\n    this.nodes = new THREE.Object3D;\n    this.links = new THREE.Object3D;\n    this.links.position.z = 4;\n    this.nodes.position.z = 6;\n\n    this.scene.add(this.nodes);\n    this.scene.add(this.links);\n\n    this.controls = new THREE.OrbitControls(this.camera, this.renderer.domElement);\n    this.controls.mouseButtons = {ORBIT: null, ZOOM: null, PAN: THREE.MOUSE.LEFT};\n    this.controls.minZoom = 0.5;\n    this.controls.maxZoom = 10;\n\n    element.appendChild(this.renderer.domElement);\n};//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMi5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL3NyYy92aWV3LmpzPzMyMGEiXSwic291cmNlc0NvbnRlbnQiOlsibW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoZWxlbWVudCkge1xuICAgIHRoaXMud2lkdGggPSBlbGVtZW50LmNsaWVudFdpZHRoO1xuICAgIHRoaXMuaGVpZ2h0ID0gZWxlbWVudC5jbGllbnRIZWlnaHQ7XG4gICAgdGhpcy5zY2VuZSA9IG5ldyBUSFJFRS5TY2VuZSgpO1xuICAgIHRoaXMuY2FtZXJhID0gbmV3IFRIUkVFLk9ydGhvZ3JhcGhpY0NhbWVyYSgtdGhpcy53aWR0aCAvIDIsIHRoaXMud2lkdGggLyAyLCB0aGlzLmhlaWdodCAvIDIsIC10aGlzLmhlaWdodCAvIDIsIDAsIDE1KTtcbiAgICB0aGlzLmNhbWVyYS5wb3NpdGlvbi56ID0gMTA7XG4gICAgdGhpcy5jYW1lcmEuem9vbSA9IDQ7XG4gICAgdGhpcy5jYW1lcmEudXBkYXRlUHJvamVjdGlvbk1hdHJpeCgpO1xuXG4gICAgdGhpcy5yZW5kZXJlciA9IG5ldyBUSFJFRS5XZWJHTFJlbmRlcmVyKHthbnRpYWxpYXM6IGZhbHNlLCBhbHBoYTogdHJ1ZX0pO1xuICAgIHRoaXMucmVuZGVyZXIuc2V0UGl4ZWxSYXRpbyh3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbyk7XG4gICAgdGhpcy5yZW5kZXJlci5zZXRTaXplKHRoaXMud2lkdGgsIHRoaXMuaGVpZ2h0KTtcbiAgICB0aGlzLnJlbmRlcmVyLmF1dG9DbGVhciA9IGZhbHNlO1xuXG4gICAgdmFyIHJlbmRlck1vZGVsID0gbmV3IFRIUkVFLlJlbmRlclBhc3ModGhpcy5zY2VuZSwgdGhpcy5jYW1lcmEpO1xuICAgIHZhciBlZmZlY3RCbG9vbSA9IG5ldyBUSFJFRS5CbG9vbVBhc3MoLjcpO1xuICAgIHZhciBlZmZlY3RDb3B5ID0gbmV3IFRIUkVFLlNoYWRlclBhc3MoVEhSRUUuQ29weVNoYWRlcik7XG4gICAgdmFyIGVmZmVjdEZYQUEgPSBuZXcgVEhSRUUuU2hhZGVyUGFzcyhUSFJFRS5GWEFBU2hhZGVyKTtcbiAgICBlZmZlY3RGWEFBLnVuaWZvcm1zWydyZXNvbHV0aW9uJ10udmFsdWUuc2V0KDEgLyB0aGlzLndpZHRoLCAxIC8gdGhpcy5oZWlnaHQpO1xuICAgIGVmZmVjdENvcHkucmVuZGVyVG9TY3JlZW4gPSB0cnVlO1xuXG4gICAgdGhpcy5jb21wb3NlciA9IG5ldyBUSFJFRS5FZmZlY3RDb21wb3Nlcih0aGlzLnJlbmRlcmVyKTtcbiAgICB0aGlzLmNvbXBvc2VyLnNldFNpemUodGhpcy53aWR0aCwgdGhpcy5oZWlnaHQpO1xuXG4gICAgdGhpcy5jb21wb3Nlci5hZGRQYXNzKHJlbmRlck1vZGVsKTtcbiAgICB0aGlzLmNvbXBvc2VyLmFkZFBhc3MoZWZmZWN0RlhBQSk7XG4gICAgdGhpcy5jb21wb3Nlci5hZGRQYXNzKGVmZmVjdEJsb29tKTtcbiAgICB0aGlzLmNvbXBvc2VyLmFkZFBhc3MoZWZmZWN0Q29weSk7XG5cbiAgICB0aGlzLnJheWNhc3RlciA9IG5ldyBUSFJFRS5SYXljYXN0ZXIoKTtcbiAgICB0aGlzLm1vdXNlID0gbmV3IFRIUkVFLlZlY3RvcjIoKTtcblxuICAgIHRoaXMubm9kZXMgPSBuZXcgVEhSRUUuT2JqZWN0M0Q7XG4gICAgdGhpcy5saW5rcyA9IG5ldyBUSFJFRS5PYmplY3QzRDtcbiAgICB0aGlzLmxpbmtzLnBvc2l0aW9uLnogPSA0O1xuICAgIHRoaXMubm9kZXMucG9zaXRpb24ueiA9IDY7XG5cbiAgICB0aGlzLnNjZW5lLmFkZCh0aGlzLm5vZGVzKTtcbiAgICB0aGlzLnNjZW5lLmFkZCh0aGlzLmxpbmtzKTtcblxuICAgIHRoaXMuY29udHJvbHMgPSBuZXcgVEhSRUUuT3JiaXRDb250cm9scyh0aGlzLmNhbWVyYSwgdGhpcy5yZW5kZXJlci5kb21FbGVtZW50KTtcbiAgICB0aGlzLmNvbnRyb2xzLm1vdXNlQnV0dG9ucyA9IHtPUkJJVDogbnVsbCwgWk9PTTogbnVsbCwgUEFOOiBUSFJFRS5NT1VTRS5MRUZUfTtcbiAgICB0aGlzLmNvbnRyb2xzLm1pblpvb20gPSAwLjU7XG4gICAgdGhpcy5jb250cm9scy5tYXhab29tID0gMTA7XG5cbiAgICBlbGVtZW50LmFwcGVuZENoaWxkKHRoaXMucmVuZGVyZXIuZG9tRWxlbWVudCk7XG59O1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9zcmMvdmlldy5qc1xuICoqIG1vZHVsZSBpZCA9IDJcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZVJvb3QiOiIifQ==");

/***/ },
/* 3 */
/***/ function(module, exports) {

	eval("module.exports = function (data, s) {\n    this.data = data || {\n            \"nodes\": [],\n            \"links\": []\n        };\n\n    this.force = d3.layout.force()\n        .nodes(this.data.nodes)\n        .links(this.data.links)\n        .gravity(0.002)\n        .charge(-100)\n        .linkDistance(35)\n        .size([s.view.width, s.view.height])\n        .start();\n\n    this.addNode = function (id, data, type, fixed, pos) {\n        if (this.findNode(id)) {\n            return;\n        }\n\n        type = type ? type : 'default';\n\n        var node = new THREE.Sprite(new THREE.SpriteMaterial(s.nodes[type].material));\n        node._type = type;\n        node._id = id;\n        s.view.nodes.add(node);\n\n        data.nodeId = node.id;\n        data.type = type;\n\n        this.data.nodes.push({\n            \"id\": id,\n            data: data,\n            fixed: fixed || false,\n            x: pos ? pos.x : undefined,\n            y: pos ? pos.y : undefined\n        });\n\n        s.view.controls.dispatchEvent({type: 'change'});\n        this.force.start();\n    };\n    this.addLink = function (source, target, value, color) {\n        for (var i = 0; i < this.data.links.length; i++) {\n            if (this.data.links[i]['source'].id === source && this.data.links[i]['target'].id === target) {\n                return;\n            }\n        }\n\n        var geometry = new THREE.Geometry();\n        geometry.vertices.push(\n            new THREE.Vector3(0, 0, 0),\n            new THREE.Vector3(1, 0, 0)\n        );\n        var line = new THREE.Line(geometry, new THREE.LineBasicMaterial({\n            color: color || 0x7f8c8d\n        }));\n        s.view.links.add(line);\n\n        this.data.links.push({\n            \"source\": this.findNode(source),\n            \"target\": this.findNode(target),\n            \"value\": value,\n            \"linkId\": line.id\n        });\n\n        this.force.start();\n    };\n    this.findNode = function (id) {\n        for (var i in this.data.nodes) {\n            if (this.data.nodes[i][\"id\"] === id) return this.data.nodes[i];\n        }\n    };\n    this.removeNode = function (id) {\n        var i = 0;\n        var n = this.findNode(id);\n        s.view.nodes.remove(s.view.nodes.getObjectById(n.data.nodeId, true));\n\n        while (i < this.data.links.length) {\n            if ((this.data.links[i]['source'].id === id) || (this.data.links[i]['target'].id === id)) {\n                s.view.links.remove(s.view.links.getObjectById(this.data.links[i].linkId, true));\n                this.data.links.splice(i, 1);\n            }\n            else i++;\n        }\n        this.data.nodes.splice(this.findNodeIndex(id), 1);\n\n        this.force.start();\n    };\n    this.findNodeIndex = function (id) {\n        for (var i = 0; i < this.data.nodes.length; i++) {\n            if (this.data.nodes[i].id == id) {\n                return i;\n            }\n        }\n    };\n    this.allNodeLinks = function (id) {\n        var arr = [];\n        this.data.links.forEach(function (item) {\n            if (item['source'].id == id) {\n                arr.push(item['target'].id);\n            } else if (item['target'].id == id) {\n                arr.push(item['source'].id);\n            }\n        });\n        return arr;\n    };\n};//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL3NyYy9tb2RlbC5qcz85NGVjIl0sInNvdXJjZXNDb250ZW50IjpbIm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKGRhdGEsIHMpIHtcbiAgICB0aGlzLmRhdGEgPSBkYXRhIHx8IHtcbiAgICAgICAgICAgIFwibm9kZXNcIjogW10sXG4gICAgICAgICAgICBcImxpbmtzXCI6IFtdXG4gICAgICAgIH07XG5cbiAgICB0aGlzLmZvcmNlID0gZDMubGF5b3V0LmZvcmNlKClcbiAgICAgICAgLm5vZGVzKHRoaXMuZGF0YS5ub2RlcylcbiAgICAgICAgLmxpbmtzKHRoaXMuZGF0YS5saW5rcylcbiAgICAgICAgLmdyYXZpdHkoMC4wMDIpXG4gICAgICAgIC5jaGFyZ2UoLTEwMClcbiAgICAgICAgLmxpbmtEaXN0YW5jZSgzNSlcbiAgICAgICAgLnNpemUoW3Mudmlldy53aWR0aCwgcy52aWV3LmhlaWdodF0pXG4gICAgICAgIC5zdGFydCgpO1xuXG4gICAgdGhpcy5hZGROb2RlID0gZnVuY3Rpb24gKGlkLCBkYXRhLCB0eXBlLCBmaXhlZCwgcG9zKSB7XG4gICAgICAgIGlmICh0aGlzLmZpbmROb2RlKGlkKSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgdHlwZSA9IHR5cGUgPyB0eXBlIDogJ2RlZmF1bHQnO1xuXG4gICAgICAgIHZhciBub2RlID0gbmV3IFRIUkVFLlNwcml0ZShuZXcgVEhSRUUuU3ByaXRlTWF0ZXJpYWwocy5ub2Rlc1t0eXBlXS5tYXRlcmlhbCkpO1xuICAgICAgICBub2RlLl90eXBlID0gdHlwZTtcbiAgICAgICAgbm9kZS5faWQgPSBpZDtcbiAgICAgICAgcy52aWV3Lm5vZGVzLmFkZChub2RlKTtcblxuICAgICAgICBkYXRhLm5vZGVJZCA9IG5vZGUuaWQ7XG4gICAgICAgIGRhdGEudHlwZSA9IHR5cGU7XG5cbiAgICAgICAgdGhpcy5kYXRhLm5vZGVzLnB1c2goe1xuICAgICAgICAgICAgXCJpZFwiOiBpZCxcbiAgICAgICAgICAgIGRhdGE6IGRhdGEsXG4gICAgICAgICAgICBmaXhlZDogZml4ZWQgfHwgZmFsc2UsXG4gICAgICAgICAgICB4OiBwb3MgPyBwb3MueCA6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgIHk6IHBvcyA/IHBvcy55IDogdW5kZWZpbmVkXG4gICAgICAgIH0pO1xuXG4gICAgICAgIHMudmlldy5jb250cm9scy5kaXNwYXRjaEV2ZW50KHt0eXBlOiAnY2hhbmdlJ30pO1xuICAgICAgICB0aGlzLmZvcmNlLnN0YXJ0KCk7XG4gICAgfTtcbiAgICB0aGlzLmFkZExpbmsgPSBmdW5jdGlvbiAoc291cmNlLCB0YXJnZXQsIHZhbHVlLCBjb2xvcikge1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuZGF0YS5saW5rcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgaWYgKHRoaXMuZGF0YS5saW5rc1tpXVsnc291cmNlJ10uaWQgPT09IHNvdXJjZSAmJiB0aGlzLmRhdGEubGlua3NbaV1bJ3RhcmdldCddLmlkID09PSB0YXJnZXQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgZ2VvbWV0cnkgPSBuZXcgVEhSRUUuR2VvbWV0cnkoKTtcbiAgICAgICAgZ2VvbWV0cnkudmVydGljZXMucHVzaChcbiAgICAgICAgICAgIG5ldyBUSFJFRS5WZWN0b3IzKDAsIDAsIDApLFxuICAgICAgICAgICAgbmV3IFRIUkVFLlZlY3RvcjMoMSwgMCwgMClcbiAgICAgICAgKTtcbiAgICAgICAgdmFyIGxpbmUgPSBuZXcgVEhSRUUuTGluZShnZW9tZXRyeSwgbmV3IFRIUkVFLkxpbmVCYXNpY01hdGVyaWFsKHtcbiAgICAgICAgICAgIGNvbG9yOiBjb2xvciB8fCAweDdmOGM4ZFxuICAgICAgICB9KSk7XG4gICAgICAgIHMudmlldy5saW5rcy5hZGQobGluZSk7XG5cbiAgICAgICAgdGhpcy5kYXRhLmxpbmtzLnB1c2goe1xuICAgICAgICAgICAgXCJzb3VyY2VcIjogdGhpcy5maW5kTm9kZShzb3VyY2UpLFxuICAgICAgICAgICAgXCJ0YXJnZXRcIjogdGhpcy5maW5kTm9kZSh0YXJnZXQpLFxuICAgICAgICAgICAgXCJ2YWx1ZVwiOiB2YWx1ZSxcbiAgICAgICAgICAgIFwibGlua0lkXCI6IGxpbmUuaWRcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdGhpcy5mb3JjZS5zdGFydCgpO1xuICAgIH07XG4gICAgdGhpcy5maW5kTm9kZSA9IGZ1bmN0aW9uIChpZCkge1xuICAgICAgICBmb3IgKHZhciBpIGluIHRoaXMuZGF0YS5ub2Rlcykge1xuICAgICAgICAgICAgaWYgKHRoaXMuZGF0YS5ub2Rlc1tpXVtcImlkXCJdID09PSBpZCkgcmV0dXJuIHRoaXMuZGF0YS5ub2Rlc1tpXTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgdGhpcy5yZW1vdmVOb2RlID0gZnVuY3Rpb24gKGlkKSB7XG4gICAgICAgIHZhciBpID0gMDtcbiAgICAgICAgdmFyIG4gPSB0aGlzLmZpbmROb2RlKGlkKTtcbiAgICAgICAgcy52aWV3Lm5vZGVzLnJlbW92ZShzLnZpZXcubm9kZXMuZ2V0T2JqZWN0QnlJZChuLmRhdGEubm9kZUlkLCB0cnVlKSk7XG5cbiAgICAgICAgd2hpbGUgKGkgPCB0aGlzLmRhdGEubGlua3MubGVuZ3RoKSB7XG4gICAgICAgICAgICBpZiAoKHRoaXMuZGF0YS5saW5rc1tpXVsnc291cmNlJ10uaWQgPT09IGlkKSB8fCAodGhpcy5kYXRhLmxpbmtzW2ldWyd0YXJnZXQnXS5pZCA9PT0gaWQpKSB7XG4gICAgICAgICAgICAgICAgcy52aWV3LmxpbmtzLnJlbW92ZShzLnZpZXcubGlua3MuZ2V0T2JqZWN0QnlJZCh0aGlzLmRhdGEubGlua3NbaV0ubGlua0lkLCB0cnVlKSk7XG4gICAgICAgICAgICAgICAgdGhpcy5kYXRhLmxpbmtzLnNwbGljZShpLCAxKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaSsrO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuZGF0YS5ub2Rlcy5zcGxpY2UodGhpcy5maW5kTm9kZUluZGV4KGlkKSwgMSk7XG5cbiAgICAgICAgdGhpcy5mb3JjZS5zdGFydCgpO1xuICAgIH07XG4gICAgdGhpcy5maW5kTm9kZUluZGV4ID0gZnVuY3Rpb24gKGlkKSB7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5kYXRhLm5vZGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5kYXRhLm5vZGVzW2ldLmlkID09IGlkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuICAgIHRoaXMuYWxsTm9kZUxpbmtzID0gZnVuY3Rpb24gKGlkKSB7XG4gICAgICAgIHZhciBhcnIgPSBbXTtcbiAgICAgICAgdGhpcy5kYXRhLmxpbmtzLmZvckVhY2goZnVuY3Rpb24gKGl0ZW0pIHtcbiAgICAgICAgICAgIGlmIChpdGVtWydzb3VyY2UnXS5pZCA9PSBpZCkge1xuICAgICAgICAgICAgICAgIGFyci5wdXNoKGl0ZW1bJ3RhcmdldCddLmlkKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoaXRlbVsndGFyZ2V0J10uaWQgPT0gaWQpIHtcbiAgICAgICAgICAgICAgICBhcnIucHVzaChpdGVtWydzb3VyY2UnXS5pZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gYXJyO1xuICAgIH07XG59O1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9zcmMvbW9kZWwuanNcbiAqKiBtb2R1bGUgaWQgPSAzXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VSb290IjoiIn0=");

/***/ },
/* 4 */
/***/ function(module, exports) {

	eval("module.exports = function (data) {\n    var textureLoader = new THREE.TextureLoader();\n\n    this.material = {\n        map: textureLoader.load(data.material.texture) || null,\n        color: data.material.color || null,\n        rotation: data.material.rotation || null,\n        fog: data.material.fog || null\n    };\n\n    this.startScale = data.material.scale;\n    this.draggable = data.draggable === undefined ? true : data.draggable;\n    this.events = data.events || {};\n};//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNC5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL3NyYy9ub2RlVHlwZS5qcz82MDM4Il0sInNvdXJjZXNDb250ZW50IjpbIm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKGRhdGEpIHtcbiAgICB2YXIgdGV4dHVyZUxvYWRlciA9IG5ldyBUSFJFRS5UZXh0dXJlTG9hZGVyKCk7XG5cbiAgICB0aGlzLm1hdGVyaWFsID0ge1xuICAgICAgICBtYXA6IHRleHR1cmVMb2FkZXIubG9hZChkYXRhLm1hdGVyaWFsLnRleHR1cmUpIHx8IG51bGwsXG4gICAgICAgIGNvbG9yOiBkYXRhLm1hdGVyaWFsLmNvbG9yIHx8IG51bGwsXG4gICAgICAgIHJvdGF0aW9uOiBkYXRhLm1hdGVyaWFsLnJvdGF0aW9uIHx8IG51bGwsXG4gICAgICAgIGZvZzogZGF0YS5tYXRlcmlhbC5mb2cgfHwgbnVsbFxuICAgIH07XG5cbiAgICB0aGlzLnN0YXJ0U2NhbGUgPSBkYXRhLm1hdGVyaWFsLnNjYWxlO1xuICAgIHRoaXMuZHJhZ2dhYmxlID0gZGF0YS5kcmFnZ2FibGUgPT09IHVuZGVmaW5lZCA/IHRydWUgOiBkYXRhLmRyYWdnYWJsZTtcbiAgICB0aGlzLmV2ZW50cyA9IGRhdGEuZXZlbnRzIHx8IHt9O1xufTtcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vc3JjL25vZGVUeXBlLmpzXG4gKiogbW9kdWxlIGlkID0gNFxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlUm9vdCI6IiJ9");

/***/ },
/* 5 */
/***/ function(module, exports) {

	eval("module.exports = function (element, s, events) {\n    var overElement;\n\n    this.mouseMove = function (e) {\n        e.preventDefault();\n\n        s.view.mouse.x = ( e.clientX / element.clientWidth ) * 2 - 1;\n        s.view.mouse.y = -( e.clientY / element.clientHeight ) * 2 + 1;\n\n\n        if (!s.view.controls.enabled) {\n            s.view.controls.drag.fixed = true;\n            s.view.controls.drag.dragged = true;\n            s.view.controls.drag.px = s.view.raycaster.ray.origin.x + s.view.width / 2;\n            s.view.controls.drag.py = -(s.view.raycaster.ray.origin.y - s.view.height / 2);\n            s.model.force.start();\n            emitNodeEvent(e, 'mousemove', overElement);\n            return;\n        }\n        if (s.intersect.node) {\n            if (!overElement) {\n                overElement = s.intersect.node.object;\n                emitNodeEvent(e, 'mouseover', overElement);\n            } else if (overElement !== s.intersect.node.object) {\n                emitNodeEvent(e, 'mouseout', overElement);\n                overElement = null;\n            }\n            emitNodeEvent(e, 'mousemove');\n        } else if (overElement) {\n            emitNodeEvent(e, 'mouseout', overElement);\n            overElement = null;\n        }\n    };\n\n    this.mouseDown = function (e) {\n        if (e.button !== 0) {\n            return;\n        }\n        e.preventDefault();\n\n        if (s.intersect.node && s.nodes[s.intersect.node.object._type].draggable) {\n            s.view.controls.enabled = false;\n            s.view.controls.drag = s.model.findNode(s.intersect.node.object._id);\n            s.view.controls.drag.dragged = false;\n        }\n    };\n\n    this.mouseUp = function (e) {\n        if (e.button !== 0) {\n            return;\n        }\n        e.preventDefault();\n\n        s.view.controls.enabled = true;\n\n        if (s.intersect.node) {\n            s.clicked.prev = s.clicked.last;\n            s.clicked.last = s.intersect.node.object;\n        } else {\n            emitGlobalEvent(e, 'emptyClick');\n            s.clicked.last = null;\n        }\n\n        if (s.view.controls.drag) {\n            if (!s.view.controls.drag.dragged) {\n                emitNodeEvent(e, 'click');\n            }\n\n            s.view.controls.drag.dragged = false;\n        }\n    };\n\n    this.dblclick = function (e) {\n        emitNodeEvent(e, 'dblclick');\n    };\n\n    this.contextmenu = function (e) {\n        emitNodeEvent(e, 'contextmenu');\n    };\n\n    this.controlsChanged = function (e) {\n        if (s.config.updateNodeScale) {\n            s.view.nodes.children.forEach(function (item) {\n                var scale = (s.view.controls.maxZoom - s.view.camera.zoom) + s.nodes[item._type].startScale;\n                item.scale.set(scale, scale, 1);\n            });\n        }\n        emitGlobalEvent(e, 'controlsChanged');\n    };\n\n    this.resize = function (e) {\n        s.view.width = element.clientWidth;\n        s.view.height = element.clientHeight;\n\n        s.view.renderer.setSize(s.view.width, s.view.height);\n        s.view.composer.setSize(s.view.width, s.view.height);\n        s.view.camera.left = s.view.width / -2;\n        s.view.camera.right = s.view.width / 2;\n        s.view.camera.top = s.view.height / 2;\n        s.view.camera.bottom = s.view.height / -2;\n        s.view.camera.updateProjectionMatrix();\n    };\n\n    function emitGlobalEvent(e, eName, d, s) {\n        if (events && events[eName]) {\n            if (d && s) {\n                events[eName](e, d, s);\n            } else {\n                events[eName](e);\n            }\n        }\n    }\n\n    function emitNodeEvent(e, eName, elem) {\n        var intersected = elem !== undefined ? elem : s.intersect.node ? s.intersect.node.object : undefined;\n        if (intersected) {\n            var events = s.nodes[intersected._type].events;\n            var event = events[eName],\n                node = s.model.findNode(intersected._id);\n            emitGlobalEvent(e, eName, node, intersected);\n            if (event) {\n                event(e, node, intersected);\n            }\n        }\n    }\n\n    element.addEventListener('mousemove', this.mouseMove, false);\n    element.addEventListener('mousedown', this.mouseDown, false);\n    element.addEventListener('mouseup', this.mouseUp, false);\n    element.addEventListener('dblclick', this.dblclick, false);\n    element.addEventListener('contextmenu', this.contextmenu, false);\n    //window.addEventListener('resize', this.resize, false);\n\n    s.view.controls.addEventListener('change', this.controlsChanged);\n\n};//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNS5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL3NyYy9ldmVudHMuanM/OWZmNiJdLCJzb3VyY2VzQ29udGVudCI6WyJtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChlbGVtZW50LCBzLCBldmVudHMpIHtcbiAgICB2YXIgb3ZlckVsZW1lbnQ7XG5cbiAgICB0aGlzLm1vdXNlTW92ZSA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcblxuICAgICAgICBzLnZpZXcubW91c2UueCA9ICggZS5jbGllbnRYIC8gZWxlbWVudC5jbGllbnRXaWR0aCApICogMiAtIDE7XG4gICAgICAgIHMudmlldy5tb3VzZS55ID0gLSggZS5jbGllbnRZIC8gZWxlbWVudC5jbGllbnRIZWlnaHQgKSAqIDIgKyAxO1xuXG5cbiAgICAgICAgaWYgKCFzLnZpZXcuY29udHJvbHMuZW5hYmxlZCkge1xuICAgICAgICAgICAgcy52aWV3LmNvbnRyb2xzLmRyYWcuZml4ZWQgPSB0cnVlO1xuICAgICAgICAgICAgcy52aWV3LmNvbnRyb2xzLmRyYWcuZHJhZ2dlZCA9IHRydWU7XG4gICAgICAgICAgICBzLnZpZXcuY29udHJvbHMuZHJhZy5weCA9IHMudmlldy5yYXljYXN0ZXIucmF5Lm9yaWdpbi54ICsgcy52aWV3LndpZHRoIC8gMjtcbiAgICAgICAgICAgIHMudmlldy5jb250cm9scy5kcmFnLnB5ID0gLShzLnZpZXcucmF5Y2FzdGVyLnJheS5vcmlnaW4ueSAtIHMudmlldy5oZWlnaHQgLyAyKTtcbiAgICAgICAgICAgIHMubW9kZWwuZm9yY2Uuc3RhcnQoKTtcbiAgICAgICAgICAgIGVtaXROb2RlRXZlbnQoZSwgJ21vdXNlbW92ZScsIG92ZXJFbGVtZW50KTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAocy5pbnRlcnNlY3Qubm9kZSkge1xuICAgICAgICAgICAgaWYgKCFvdmVyRWxlbWVudCkge1xuICAgICAgICAgICAgICAgIG92ZXJFbGVtZW50ID0gcy5pbnRlcnNlY3Qubm9kZS5vYmplY3Q7XG4gICAgICAgICAgICAgICAgZW1pdE5vZGVFdmVudChlLCAnbW91c2VvdmVyJywgb3ZlckVsZW1lbnQpO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChvdmVyRWxlbWVudCAhPT0gcy5pbnRlcnNlY3Qubm9kZS5vYmplY3QpIHtcbiAgICAgICAgICAgICAgICBlbWl0Tm9kZUV2ZW50KGUsICdtb3VzZW91dCcsIG92ZXJFbGVtZW50KTtcbiAgICAgICAgICAgICAgICBvdmVyRWxlbWVudCA9IG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbWl0Tm9kZUV2ZW50KGUsICdtb3VzZW1vdmUnKTtcbiAgICAgICAgfSBlbHNlIGlmIChvdmVyRWxlbWVudCkge1xuICAgICAgICAgICAgZW1pdE5vZGVFdmVudChlLCAnbW91c2VvdXQnLCBvdmVyRWxlbWVudCk7XG4gICAgICAgICAgICBvdmVyRWxlbWVudCA9IG51bGw7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgdGhpcy5tb3VzZURvd24gPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICBpZiAoZS5idXR0b24gIT09IDApIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICAgICAgaWYgKHMuaW50ZXJzZWN0Lm5vZGUgJiYgcy5ub2Rlc1tzLmludGVyc2VjdC5ub2RlLm9iamVjdC5fdHlwZV0uZHJhZ2dhYmxlKSB7XG4gICAgICAgICAgICBzLnZpZXcuY29udHJvbHMuZW5hYmxlZCA9IGZhbHNlO1xuICAgICAgICAgICAgcy52aWV3LmNvbnRyb2xzLmRyYWcgPSBzLm1vZGVsLmZpbmROb2RlKHMuaW50ZXJzZWN0Lm5vZGUub2JqZWN0Ll9pZCk7XG4gICAgICAgICAgICBzLnZpZXcuY29udHJvbHMuZHJhZy5kcmFnZ2VkID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgdGhpcy5tb3VzZVVwID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgaWYgKGUuYnV0dG9uICE9PSAwKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgICAgIHMudmlldy5jb250cm9scy5lbmFibGVkID0gdHJ1ZTtcblxuICAgICAgICBpZiAocy5pbnRlcnNlY3Qubm9kZSkge1xuICAgICAgICAgICAgcy5jbGlja2VkLnByZXYgPSBzLmNsaWNrZWQubGFzdDtcbiAgICAgICAgICAgIHMuY2xpY2tlZC5sYXN0ID0gcy5pbnRlcnNlY3Qubm9kZS5vYmplY3Q7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBlbWl0R2xvYmFsRXZlbnQoZSwgJ2VtcHR5Q2xpY2snKTtcbiAgICAgICAgICAgIHMuY2xpY2tlZC5sYXN0ID0gbnVsbDtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChzLnZpZXcuY29udHJvbHMuZHJhZykge1xuICAgICAgICAgICAgaWYgKCFzLnZpZXcuY29udHJvbHMuZHJhZy5kcmFnZ2VkKSB7XG4gICAgICAgICAgICAgICAgZW1pdE5vZGVFdmVudChlLCAnY2xpY2snKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcy52aWV3LmNvbnRyb2xzLmRyYWcuZHJhZ2dlZCA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIHRoaXMuZGJsY2xpY2sgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICBlbWl0Tm9kZUV2ZW50KGUsICdkYmxjbGljaycpO1xuICAgIH07XG5cbiAgICB0aGlzLmNvbnRleHRtZW51ID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgZW1pdE5vZGVFdmVudChlLCAnY29udGV4dG1lbnUnKTtcbiAgICB9O1xuXG4gICAgdGhpcy5jb250cm9sc0NoYW5nZWQgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICBpZiAocy5jb25maWcudXBkYXRlTm9kZVNjYWxlKSB7XG4gICAgICAgICAgICBzLnZpZXcubm9kZXMuY2hpbGRyZW4uZm9yRWFjaChmdW5jdGlvbiAoaXRlbSkge1xuICAgICAgICAgICAgICAgIHZhciBzY2FsZSA9IChzLnZpZXcuY29udHJvbHMubWF4Wm9vbSAtIHMudmlldy5jYW1lcmEuem9vbSkgKyBzLm5vZGVzW2l0ZW0uX3R5cGVdLnN0YXJ0U2NhbGU7XG4gICAgICAgICAgICAgICAgaXRlbS5zY2FsZS5zZXQoc2NhbGUsIHNjYWxlLCAxKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGVtaXRHbG9iYWxFdmVudChlLCAnY29udHJvbHNDaGFuZ2VkJyk7XG4gICAgfTtcblxuICAgIHRoaXMucmVzaXplID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgcy52aWV3LndpZHRoID0gZWxlbWVudC5jbGllbnRXaWR0aDtcbiAgICAgICAgcy52aWV3LmhlaWdodCA9IGVsZW1lbnQuY2xpZW50SGVpZ2h0O1xuXG4gICAgICAgIHMudmlldy5yZW5kZXJlci5zZXRTaXplKHMudmlldy53aWR0aCwgcy52aWV3LmhlaWdodCk7XG4gICAgICAgIHMudmlldy5jb21wb3Nlci5zZXRTaXplKHMudmlldy53aWR0aCwgcy52aWV3LmhlaWdodCk7XG4gICAgICAgIHMudmlldy5jYW1lcmEubGVmdCA9IHMudmlldy53aWR0aCAvIC0yO1xuICAgICAgICBzLnZpZXcuY2FtZXJhLnJpZ2h0ID0gcy52aWV3LndpZHRoIC8gMjtcbiAgICAgICAgcy52aWV3LmNhbWVyYS50b3AgPSBzLnZpZXcuaGVpZ2h0IC8gMjtcbiAgICAgICAgcy52aWV3LmNhbWVyYS5ib3R0b20gPSBzLnZpZXcuaGVpZ2h0IC8gLTI7XG4gICAgICAgIHMudmlldy5jYW1lcmEudXBkYXRlUHJvamVjdGlvbk1hdHJpeCgpO1xuICAgIH07XG5cbiAgICBmdW5jdGlvbiBlbWl0R2xvYmFsRXZlbnQoZSwgZU5hbWUsIGQsIHMpIHtcbiAgICAgICAgaWYgKGV2ZW50cyAmJiBldmVudHNbZU5hbWVdKSB7XG4gICAgICAgICAgICBpZiAoZCAmJiBzKSB7XG4gICAgICAgICAgICAgICAgZXZlbnRzW2VOYW1lXShlLCBkLCBzKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgZXZlbnRzW2VOYW1lXShlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGVtaXROb2RlRXZlbnQoZSwgZU5hbWUsIGVsZW0pIHtcbiAgICAgICAgdmFyIGludGVyc2VjdGVkID0gZWxlbSAhPT0gdW5kZWZpbmVkID8gZWxlbSA6IHMuaW50ZXJzZWN0Lm5vZGUgPyBzLmludGVyc2VjdC5ub2RlLm9iamVjdCA6IHVuZGVmaW5lZDtcbiAgICAgICAgaWYgKGludGVyc2VjdGVkKSB7XG4gICAgICAgICAgICB2YXIgZXZlbnRzID0gcy5ub2Rlc1tpbnRlcnNlY3RlZC5fdHlwZV0uZXZlbnRzO1xuICAgICAgICAgICAgdmFyIGV2ZW50ID0gZXZlbnRzW2VOYW1lXSxcbiAgICAgICAgICAgICAgICBub2RlID0gcy5tb2RlbC5maW5kTm9kZShpbnRlcnNlY3RlZC5faWQpO1xuICAgICAgICAgICAgZW1pdEdsb2JhbEV2ZW50KGUsIGVOYW1lLCBub2RlLCBpbnRlcnNlY3RlZCk7XG4gICAgICAgICAgICBpZiAoZXZlbnQpIHtcbiAgICAgICAgICAgICAgICBldmVudChlLCBub2RlLCBpbnRlcnNlY3RlZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBlbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsIHRoaXMubW91c2VNb3ZlLCBmYWxzZSk7XG4gICAgZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCB0aGlzLm1vdXNlRG93biwgZmFsc2UpO1xuICAgIGVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2V1cCcsIHRoaXMubW91c2VVcCwgZmFsc2UpO1xuICAgIGVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignZGJsY2xpY2snLCB0aGlzLmRibGNsaWNrLCBmYWxzZSk7XG4gICAgZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdjb250ZXh0bWVudScsIHRoaXMuY29udGV4dG1lbnUsIGZhbHNlKTtcbiAgICAvL3dpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdyZXNpemUnLCB0aGlzLnJlc2l6ZSwgZmFsc2UpO1xuXG4gICAgcy52aWV3LmNvbnRyb2xzLmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIHRoaXMuY29udHJvbHNDaGFuZ2VkKTtcblxufTtcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vc3JjL2V2ZW50cy5qc1xuICoqIG1vZHVsZSBpZCA9IDVcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VSb290IjoiIn0=");

/***/ }
/******/ ]);